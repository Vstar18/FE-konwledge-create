<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <style>
     #main {
      width: 200px;
      height: 200px;
      background-color: #000;
      color: #fff;
      text-align: center;
      line-height: 200px;
    }
  </style>
</head>
<body>
  <div id="main"></div>
</body>
<script>
  /**
   * 截流是一个类似与防抖的操作
   * 但是截流要求，某一个事件在一定的事件内只发生一次
   * 实现截流的方式目前有1，定时器；2，时间戳
   * */

  /**
   * 时间戳方式，在事件执行时判断当前的时间-之前的时间（最一开始设置为0），
   * 如果大于要求的时间则执行，然后更新时间戳为当前时间戳
   * 如果小于就不执行
   * */
  let throttle = function (fn, wait) {
    let previous = 0;
    let timer = +new Date();
    return function () {
      let context = this;
      let args = arguments;
      if(now - previous > wait) {
        fn.apply(context,args);
        previous = now;
      }
    }
  }

  /**
   * 使用定时器的方式
   * 当事件触发的时候，我们设置一个定时器，再次触发事件的时候，定时器存在，就不执行，
   * 直到设置的时间后清空定时器
  */
  let throttle = function (fn,wait) {
    let timer;
    return function () {
      let context = this;
      let args = arguments;
      if(!timer) {
        timer = setTimeout(()=>{
          timer = null;
          fn.apply(context,args);
        },wait)
      }
    }
  }
</script>
</html>