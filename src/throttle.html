<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <style>
     #main {
      width: 200px;
      height: 200px;
      background-color: #000;
      color: #fff;
      text-align: center;
      line-height: 200px;
    }
  </style>
</head>
<body>
  <div id="main"></div>
</body>
<script>
  
  let throttle = function (fn,wait,options) {
    let previous = 0;
    let timeNow,context,args,result;
    if(!options) options = {};
    return function () {
      context = this;
      args = arguments;
      timeNow = + new Date();
      if(timeNow - previous > wait) {
        result = fn.apply(context,args);
        previous = timeNow;
      }
    }
    return result;
  }
  let throttle = function (fn,wait,options) {
    let previous = 0;
    let timeNow,context,args,result;
    if(!options) options = {};
    return function () {
      context = this;
      args = arguments;
      timeNow = + new Date();
      if(timeNow - previous > wait) {
        result = fn.apply(context,args);
        previous = timeNow;
      }
    }
    return result;
  }
  let count = 0;
  let main = document.getElementById('main');
  function getUserAction () {
    main.innerHTML = count++;
  }
  main.onmousemove = throttle(getUserAction, 3000);
  /**
   * 从代码中我们可以看出，第一个时间戳的版本有一个问题就是，
   * 如果在停止执行之后是不能再触发一次事件的。第二个版本的问题就是不是立即执行，
   * 而是会在触发一定的时间之后执行，停止触发后还有再执行一次事件。
   * 那我们有的时候需要立即执行，有的时候需要停止触发之后不执行应该改进一下代码，
   * 还需要取消功能，所以接下来写一个进阶的版本解决一下这两个问题。
   */
</script>
</html>